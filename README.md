Проект Foodgram, "Продуктовый помощник"
Python Django Фреймворк Django REST PostgreSQL Nginx gunicorn docker GitHub%20 Действий Яндекс.Облако

Описание
Онлайн-сервис Foodgram и API для него.Имеется реализация CI/CD проекта.На этом сервисе пользователи могут публиковать рецепты, подписываться на публикации других пользователей, добавлять понравившиеся рецепты в список "Избранное", а перед походом в магазин скачивать сводный список продуктов, необходимых для приготовления одного или нескольких выбранных блюд.

Доступный функционал
Аутентификация реализована с помощью стандартного модуля DRF - Authtoken.
У неаутентифицированных пользователей доступ к API только на уровне чтения.
Создание объектов разрешено только аутентифицированным пользователям.На прочий фунционал наложено ограничение в виде административных ролей и авторства.
Управление пользователями.
Возможность получения подробной информации о себе и ее редактирование.
Возможность подписаться на других пользователей и отписаться от них.
Получение списка всех тегов и ингредиентов.
Получение списка всех рецептов, их добавление.Получение, обновление и удаление конкретного рецепта.
Возможность добавить рецепт в избранное.
Возможность добавить рецепт в список покупок.
Возможность скачать список покупок в PDF формате.

Технологи:
Python 3.7
Django 3.2.15
Django Rest Framework 3.12.4
Authtoken
Docker
Docker-создавать
PostgreSQL
Gunicorn
Nginx
Действия на GitHub
Выделенный сервер Linux Ubuntu 22.04 с публичным IP
Локальный запуск проекта
Склонировать репозиторий:
 git clone <название репозитория>
   < cdназвание репозитория> 
Cоздать и активировать виртуальное окружение:

Команда для установки виртуального окружения на Mac или Linux:

 python3 -m поддерживает env 
 исходный код env/bin/активировать
Команда для Windows:

 python -m venv venv 
 исходный код venv/Скрипты/активировать
Перейти в директорию infra:
   cd infra
Создать файл .env по образцу:
 cp.env.example .env
Выполнить команду для доступа к документации:
 docker-создание 
Установить зависимости из файла requirements.txt:

   cd..
 серверная частьcd 
 pip install -r requirements.txt
 python manage.py мигрировать
Заполнить базу тестовыми данными об ингредиентах:

 python manage.py load_ingredients_data
Создать суперпользователя, если необходимо:

управление на python.py создает суперпользователя
Запустить локальный сервер:
 python manage.py сервер запуска
Установка на удалённом сервере
Выполнить вход на удаленный сервер
Установить docker:
 установка sudo apt docker.io
Установить docker-compose:
 sudo apt установит docker-compose 
или воспользоваться официальной инструкцией

Находясь локально в директории infra/, скопировать файлы docker-compose.yml и nginx.conf на удаленный сервер:
scp docker-compose.yml <имя пользователя>@<хост>:/home/<имя пользователя>/
scp nginx.conf <имя пользователя>@<хост>:/home/<имя пользователя>/
Для правильной работы workflow необходимо добавить в Secrets данного репозитория на GitHub переменные окружения:
Переменные PostgreSQL, ключ проекта Django и их значения по-умолчанию можно взять из файла .env.example, затем установить свои.

DOCKER_USERNAME=<имя пользователя DockerHub>
DOCKER_PASSWORD=<пароль от DockerHub>

USER=<username для подключения к удаленному серверу>
HOST=<ip сервера>
PASSPHRASE=<пароль для сервера, если он установлен>
SSH_KEY=<ваш приватный SSH-ключ (для получения команда: cat ~/.ssh/id_rsa)>

TELEGRAM_TO=<id вашего Телеграм-аккаунта>
TELEGRAM_TOKEN=<токен вашего бота>
Workflow проекта
запускается при выполнении команды git push
tests: проверка кода на соответствие PEP8.
build_and_push_to_docker_hub: сборка и размещение образа проекта на DockerHub.
deploy: автоматический деплой на боевой сервер и запуск проекта.
send_massage: отправка уведомления пользователю в Телеграм.
После успешного результата работы workflow зайдите на боевой сервер
Примените миграции:
 sudo docker-создание бэкэнда python для exec manage.py миграция
Подгружаем статику:
 sudo docker-создание бэкэнда python на языке exec manage.py collectstatic --no-input
Заполните базу тестовыми данными об ингредиентах:
 sudo docker-создание бэкэнда python для exec manage.py load_ingredients_data
Создайте суперпользователя:
 sudo docker-управление бэкендом python для создания exec.py создает суперпользователя
Примеры некоторых запросов API
Регистрация пользователя:

 СООБЩЕНИЕ / api/v1/пользователи/
Получение данных своей учетной записи:

 GET /api/v1/users/me/ 
Добавление подписки:

 ПУБЛИКАЦИЯ / api/v1/пользователи/ id/ подписаться/
Обновление рецепта:

 ПАТЧ / api/v1/рецепты/id/
Удаление рецепта из избранного:

 УДАЛИТЬ /api/v1/рецепты/id/избранное/
Получение списка ингредиентов:

 ПОЛУЧИТЬ /api/v1/ингредиенты/
Скачать список покупок:

 ПОЛУЧИТЬ /api/v1/рецепты/download_shopping_cart/
Проект доступен по адресу: 


Автор бэкэнд:
Гиржу Николай
